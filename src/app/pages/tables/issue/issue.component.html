<nb-card>
  <nb-card-header>
    Issue Table

    <!-- <button (click)="testAdweb()" class="float-right" nbButton outline status="danger">
      <nb-icon icon="close-outline"></nb-icon>
    </button> -->
    <!-- <button class="float-right mr-2" nbButton outline status="success" (click)="downloadIssue()">
      <nb-icon icon="download-outline"></nb-icon>
    </button> -->
    <button (click)="newIssue()" class="float-right mr-2" nbButton outline status="primary">New Issue
      <nb-icon icon="plus-outline"></nb-icon>
    </button>
  </nb-card-header>
  <nb-card-body>
    <table datatable [dtOptions]="dtOptions[1]" [dtTrigger]="dtTrigger" class="display row-border hover cell-border"
      style="width:100%">
      <thead>
        <tr class="table-secondary">
          <th>#</th>
          <th>ISSUE&nbsp;NO</th>
          <th>TITLE</th>
          <th>DESCRIPTION</th>
          <th>TYPE</th>
          <th>STEP</th>
          <th>STATUS</th>
          <th>ACTION</th>
        </tr>
        <!-- </thead> -->
      <tbody *ngIf="issueModel?.length != 0">
        <tr *ngFor="let issue of issueModel;index as i" (click)="selectedRow($event, i)"
          [class.selected]="i === currentRow">
          <td>{{i + 1 + indexTable}}</td>
          <td>{{ issue.issueNo }}</td>
          <td>{{ issue.title }}</td>
          <td>
            <div style="max-width: 18rem;word-wrap: break-word;">
              <ngx-tiny-mce-flat 
              *ngIf="issue.failureDesc"
              [rickText]="issue.failureDesc.split(' ', 10).join(' ') + '</p>'">
              </ngx-tiny-mce-flat>
            </div>
          </td>
          <td>{{ issue.processType | uppercase }}</td>
          <td>{{ issue.currentStep | uppercase }}</td>
          <td>
            <nb-progress-bar [value]="showIssueStatus(issue.issueStatus)"
              [status]="progressStatus(showIssueStatus(issue.issueStatus))" size="small">{{ issue.issueStatus }}
            </nb-progress-bar>
          </td>
          <td class="text-center">
            <button size="small" (click)="openIssue(issue.id)" nbButton outline status="info">
              Open <nb-icon icon="book-open-outline"></nb-icon>
            </button>
            <button size="small" (click)="removeIssue(issue.id, issue.processType)" class="float-right" nbButton outline
              status="danger">
              <nb-icon icon="close-outline"></nb-icon>
            </button>
          </td>
        </tr>
      </tbody>
      <tbody *ngIf="issueModel?.length == 0 || !issueModel">
        <tr>
          <td colspan="3" class="no-data-available">No data!</td>
        </tr>
      <tbody>
    </table>
  </nb-card-body>
</nb-card>